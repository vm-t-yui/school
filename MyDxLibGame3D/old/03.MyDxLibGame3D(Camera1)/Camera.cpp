//-----------------------------------------------------------------------------
// @brief  カメラクラス.
// 2016 Takeru Yui All Rights Reserved.
//-----------------------------------------------------------------------------
#define _USE_MATH_DEFINES
#include <math.h>
#include "Camera.h"
#include "Player.h"

//-----------------------------------------------------------------------------
// @brief  コンストラクタ.
//-----------------------------------------------------------------------------
Camera::Camera()
{
    //奥行0.1～1000までをカメラの描画範囲とする
    SetCameraNearFar(0.1f, 1000.0f);

	// FOV(視野角)を60度に
	SetupCamera_Perspective(60.0f * (static_cast<float>(M_PI) / 180.0f));

    //(0,10,-20)の視点から(0,10,0)のターゲットを見る角度にカメラを設置
	pos = VGet(0, 10, -20);
    SetCameraPositionAndTarget_UpVecY(pos, VGet(0.0f, 10.0f, 0.0f));
}

//-----------------------------------------------------------------------------
// @brief  デストラクタ.
//-----------------------------------------------------------------------------
Camera::~Camera()
{
	// 処理なし.
}

//-----------------------------------------------------------------------------
// @brief  更新.
//-----------------------------------------------------------------------------
void Camera::Update(const Player& player)
{
	// z軸上で、プレイヤーから一定距離離れた状態でプレイヤーを常に見続けるよう位置調整
	// カメラに位置を反映.
	VECTOR targetPos = player.GetPos();
	targetPos = VGet(targetPos.x, targetPos.y + 8.0f, targetPos.z);
	SetCameraPositionAndTarget_UpVecY(pos, targetPos);
}